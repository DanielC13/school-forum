(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{271:function(e,t,n){},288:function(e,t,n){},328:function(e,t,n){},527:function(e,t,n){"use strict";n.r(t);var s=n(5),a=n(0),r=n.n(a),c=n(36),o=n.n(c),i=n(32),l=n.n(i),j=n(47),u=n(7),d=(n(271),n(51)),m=n.n(d),h=n(10),p=n(11),b=n(14),x=n(20),O=n(529),f=n(174),g=n(536),w=n(530),v=n(69),y=n(542),k=n(543),I=n(544),N=n(545),S=n(546),P=n(547),C=(n(288),n(531)),E=n(80),_=(O.a.Header,O.a.Content),z=O.a.Footer,R=O.a.Sider,T=f.a.SubMenu,F=function(e){Object(b.a)(n,e);var t=Object(x.a)(n);function n(e){var s;Object(h.a)(this,n),(s=t.call(this,e)).onCollapse=function(e){s.setState({collapsed:e})},s.customTrigger=function(){return r.a.createElement(s.state.collapsed?y.a:k.a,{className:"anticon anticon-left",style:{color:"light"==s.state.theme?"black":"white",fontSize:"20px",marginTop:"15px"}})},s.logout=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.cookies,e.next=3,m.a.post("dj-rest-auth/logout/");case 3:return n=e.sent,e.next=6,n.status;case 6:200==e.sent&&(t.remove("tkn"),document.location.reload());case 8:case"end":return e.stop()}}),e)})));var a=e.cookies;return s.state={collapsed:!0,token:a.get("tkn"),theme:localStorage.getItem("theme").toString()||"light"},console.log(s.state.theme,typeof s.state.theme),s}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.collapsed;return Object(s.jsxs)(O.a,{style:{minHeight:"100vh",overflow:"hidden"},children:[Object(s.jsxs)(R,{trigger:this.customTrigger(),collapsible:!0,collapsed:e,onCollapse:this.onCollapse,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,zIndex:1},theme:"light"==this.state.theme?"light":"dark",children:[Object(s.jsx)("div",{className:"logo"}),Object(s.jsxs)(f.a,{defaultSelectedKeys:["1"],mode:"inline",theme:"light"==this.state.theme?"light":"dark",children:[Object(s.jsx)(f.a.Item,{icon:Object(s.jsx)(I.a,{}),children:Object(s.jsx)(E.b,{to:"/announcement",children:"Announcement"})},"1"),Object(s.jsx)(f.a.Item,{icon:Object(s.jsx)(N.a,{}),children:"Course"},"2"),Object(s.jsxs)(T,{icon:Object(s.jsx)(S.a,{}),title:"Team",children:[Object(s.jsx)(f.a.Item,{children:"Team 1"},"6"),Object(s.jsx)(f.a.Item,{children:"Team 2"},"8")]},"sub2")]})]}),Object(s.jsxs)(O.a,{className:"site-layout",style:{marginLeft:e?80:200,zIndex:0,transition:".2s"},children:[Object(s.jsx)(g.a,{className:"site-layout-background",style:{padding:"10px",backgroundColor:"light"==this.state.theme?"white":"#002140",position:"fixed",width:"100%",left:"0",zIndex:"1"},extra:[Object(s.jsx)(w.a,{placement:"bottomRight",title:"You about to logout, are you sure?",onConfirm:this.logout,okText:"Yes",cancelText:"No",icon:Object(s.jsx)(P.a,{style:{color:"red"}}),children:Object(s.jsx)(v.a,{type:"primary",children:"Logout"},"1")})]}),Object(s.jsx)(_,{style:{margin:"60px 16px",zIndex:"0"},children:this.props.children}),Object(s.jsx)(z,{style:{textAlign:"center"},children:"Ant Design \xa92018 Created by Ant UED"})]})]})}}]),n}(r.a.Component),L=Object(C.a)(F),M=n(42),A=n(534),q=n(537),D=n(540),H=n(539),U=n(548),V=n(549),B=n(550),J=n(551),W=(n(328),n.p+"static/media/random.a2c77e76.jpg"),Y=n(532),K=function(){var e=Object(Y.a)(["token"]),t=Object(u.a)(e,3),n=(t[0],t[1]),r=(t[2],Object(a.useState)(null)),c=Object(u.a)(r,2),o=c[0],i=c[1],d=function(){var e=Object(j.a)(l.a.mark((function e(t){var s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={path:"/"},e.prev=1,e.next=4,m.a.post("dj-rest-auth/login/",{username:t.username,password:t.password});case 4:a=e.sent,n("tkn",a.data.access_token,s),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"con",children:Object(s.jsxs)("div",{className:"inner-con",children:[Object(s.jsx)("div",{className:"form-container",children:Object(s.jsxs)(A.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:d,children:[Object(s.jsx)("h1",{children:"Login"}),Object(s.jsx)(A.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(s.jsx)(q.a,{prefix:Object(s.jsx)(U.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(s.jsx)(A.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(s.jsx)(q.a,{prefix:Object(s.jsx)(V.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(s.jsxs)(A.a.Item,{children:[o?Object(s.jsx)(D.a,{message:"Wrong username or password",type:"error",showIcon:!0,style:{fontSize:"12px"}}):Object(s.jsx)("span",{}),Object(s.jsx)(A.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(s.jsx)(H.a,{children:"Remember me"})}),Object(s.jsx)("a",{className:"login-form-forgot",href:"password-reset",children:"Forgot password"})]}),Object(s.jsx)(A.a.Item,{children:Object(s.jsx)(v.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]})}),Object(s.jsx)("img",{className:"picture-container",src:W,alt:"",width:"100",height:"100"})]})})},G=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(u.a)(c,2),i=o[0],d=o[1],h=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,m.a.post("dj-rest-auth/password/reset/",{email:t.email}).then((function(e){return d(!1)}));case 4:e.sent,r(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"con",children:Object(s.jsxs)("div",{className:"inner-con",children:[Object(s.jsx)("div",{className:"form-container reset-form",children:Object(s.jsxs)(A.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:h,children:[Object(s.jsx)("h1",{children:"Forgot password"}),Object(s.jsx)(A.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your Email!"}],children:Object(s.jsx)(q.a,{prefix:Object(s.jsx)(B.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),n?Object(s.jsx)(D.a,{message:"Something went wrong...Please try again.",type:"error",showIcon:!0,closable:!0,style:{fontSize:"12px"}}):null==n?Object(s.jsx)("span",{}):Object(s.jsx)(D.a,{message:"Password Reset Link has been sended,check your mail",type:"success",showIcon:!0,style:{fontSize:"12px"}}),Object(s.jsx)("p",{children:"Reset Password link will be send to your email"}),Object(s.jsx)(A.a.Item,{children:Object(s.jsx)(v.a,{type:"primary",loading:i,htmlType:"submit",children:"Send Email"})})]})}),Object(s.jsx)("img",{className:"picture-container",src:W,alt:"",width:"100",height:"100"})]})})},Q=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),i=Object(u.a)(o,2),d=i[0],h=i[1],p=function(){var t=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(!0),t.next=4,m.a.post("dj-rest-auth/password/reset/confirm/",{new_password1:n.new_password1,new_password2:n.new_password2,uid:e.match.params.uid,token:e.match.params.token}).then((function(e){return h(!1)}));case 4:t.sent,c(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),c(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"con",children:Object(s.jsxs)("div",{className:"inner-con",children:[Object(s.jsx)("div",{className:"form-container",children:r||null==r?Object(s.jsxs)(A.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:p,children:[Object(s.jsx)("h1",{children:"Reset password"}),Object(s.jsx)(A.a.Item,{name:"new_password1",rules:[{required:!0,message:"Please input your new password!"},{validator:function(e,t){return t.length<8&&t.length>0?Promise.reject(new Error("Password cannot less than 8 letters")):t.length>=8?Promise.resolve():void 0}}],hasFeedback:!0,children:Object(s.jsx)(q.a,{prefix:Object(s.jsx)(J.a,{className:"site-form-item-icon"}),type:"password",placeholder:"New password"})}),Object(s.jsx)(A.a.Item,{name:"new_password2",rules:[{required:!0,message:"Please input your confirm password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return t("new_password1")!==n?Promise.reject(new Error("New password and confirm password must be the same!")):t("new_password1")==n&&n.length>=8?Promise.resolve():n.length<8&&n.length>0?Promise.reject(new Error("Password cannot less than 8 letters")):void 0}}}],hasFeedback:!0,children:Object(s.jsx)(q.a,{prefix:Object(s.jsx)(J.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Confirm password"})}),r?Object(s.jsx)(D.a,{message:"Something went wrong...Please try again.",type:"error",showIcon:!0,style:{fontSize:"12px"}}):null==r?Object(s.jsx)("span",{}):Object(s.jsx)(D.a,{message:"Password Reset Complete!",type:"success",showIcon:!0,style:{fontSize:"12px"}}),Object(s.jsx)(A.a.Item,{children:Object(s.jsx)(v.a,{type:"primary",loading:d,htmlType:"submit",children:"Reset"})})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(D.a,{message:"Reset password success!",type:"success",showIcon:!0,style:{fontSize:"15px"}}),Object(s.jsxs)("p",{style:{float:"right",fontSize:"15px"},children:["Return to"," ",Object(s.jsx)(E.b,{to:"/login",replace:!0,children:"Log in"})]})]})}),Object(s.jsx)("img",{className:"picture-container",src:W,alt:"",width:"100",height:"100"})]})})},X=n(248),Z=n(541),$=n(538),ee=n(535),te=n(255),ne=n(552),se=n(249),ae=n.n(se),re=function(e){var t=new Date(e);return"".concat(t.toDateString()," | ").concat(t.getHours(),":").concat(t.getMinutes())},ce=n(250),oe=n.n(ce),ie=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),l=Object(u.a)(i,2),j=l[0],d=l[1],h=Object(a.useState)(!0),p=Object(u.a)(h,2),b=p[0],x=p[1];Object(a.useEffect)((function(){f((function(e){return o(e)}))}),[]);var O=function(e){var t=e.icon,n=e.text;return Object(s.jsxs)(Z.b,{children:[r.a.createElement(t),n]})},f=function(e){m.a.get("api/announcement/").then((function(t){return e(t.data)}))};return Object(s.jsx)("div",{className:"demo-infinite-container",children:Object(s.jsx)(ae.a,{initialLoad:!1,pageStart:0,loadMore:function(){if(d(!0),c.length>10)return $.b.warning("Infinite List loaded all"),x(!1),void d(!1);f((function(e){Object(X.a)("data"),c=c.concat(e.results),o(c),d(!1)}))},hasMore:!j&&b,useWindow:!1,children:Object(s.jsx)(ee.b,{itemLayout:"vertical",dataSource:c,renderItem:function(t){return Object(s.jsxs)(ee.b.Item,{style:{border:"3px solid rgba(0,0,0,0.3)",borderRadius:"10px",padding:"20px",margin:"20px 5px",backgroundColor:"white"},actions:[Object(s.jsx)(O,{icon:ne.a,text:"2"},"list-vertical-message")],onClick:function(){return console.log(e.history.push("announcement/".concat(t.id)))},children:[Object(s.jsx)(ee.b.Item.Meta,{title:Object(s.jsx)("h4",{children:t.title}),description:t.author.username}),re(t.date_posted)]},t.id)},children:j&&b&&Object(s.jsx)("div",{className:"demo-loading-container",children:Object(s.jsx)(te.a,{})})})})})},le=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),i=Object(u.a)(o,2),d=i[0],h=i[1],p=function(){var t=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("api/announcement/".concat(e.match.params.id,"/")).then((function(e){return n(e)}));case 3:return t.sent,t.abrupt("return",Response.status);case 7:t.prev=7,t.t0=t.catch(0),h(!0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){p((function(e){return c(e.data)}))}),[]),r.author&&!d?Object(s.jsxs)(ee.b.Item,{style:{border:"3px solid rgba(0,0,0,0.3)",borderRadius:"10px",padding:"20px",margin:"20px 5px",backgroundColor:"white",minHeight:"300px"},children:[Object(s.jsx)(ee.b.Item.Meta,{title:Object(s.jsx)("h4",{children:r.title}),description:r.author.username+" | "+re(r.date_posted)}),r.content,Object(s.jsx)("div",{children:r.announcefile.map((function(e){return Object(s.jsx)(oe.a,{fileType:(t=e.file,t.split(".").pop()),filePath:e.file});var t}))})]},r.id):Object(s.jsx)("h3",{children:"404 Not found"})},je=function(e){return e.verify?Object(s.jsx)(L,{children:Object(s.jsxs)(M.d,{children:[Object(s.jsx)(M.b,{exact:!0,path:"/announcement",component:ie}),Object(s.jsx)(M.b,{exact:!0,path:"/announcement/:id",component:le}),Object(s.jsx)(M.a,{from:"*",to:"/announcement"})]})}):Object(s.jsxs)(M.d,{children:[Object(s.jsx)(M.b,{exact:!0,path:"/login",component:K}),Object(s.jsx)(M.b,{exact:!0,path:"/password-reset",component:G}),Object(s.jsx)(M.b,{path:"/password-reset-confirm/:uid/:token",component:Q}),Object(s.jsx)(M.a,{from:"*",to:"/login"})]})},ue=n(533);m.a.defaults.baseURL="http://127.0.0.1:8000";var de=function(){var e=Object(Y.a)(["token"]),t=Object(u.a)(e,3),n=t[0],r=(t[1],t[2]),c=Object(a.useState)(!!n.tkn&&(m.a.defaults.headers.common.Authorization="Bearer ".concat(n.tkn),!0)),o=Object(u.a)(c,2),i=o[0],d=o[1],h=function(){var e=Object(j.a)(l.a.mark((function e(){var t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.tkn){e.next=9;break}return e.next=4,m.a.post("dj-rest-auth/token/verify/",{token:n.tkn});case 4:return t=e.sent,e.next=7,t.status;case 7:return s=e.sent,e.abrupt("return",200==s);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),r("tkn"),e.abrupt("return",!1);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h().then((function(e){return d(e)}))}),[]),Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com"}),Object(s.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Sarabun:wght@400&display=swap"}),Object(s.jsx)("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined",rel:"stylesheet"}),Object(s.jsx)(ue.a,{children:Object(s.jsx)(E.a,{children:Object(s.jsx)(je,{href:"this.props.href",verify:i})})})]})};n(526);o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(de,{})}),document.getElementById("root"))}},[[527,1,2]]]);
//# sourceMappingURL=main.631ff741.chunk.js.map